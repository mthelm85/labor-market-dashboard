import{C as I,D as B,F as g,G as N,q as T,H as p,h as A,z as Y,I as w,J as x,K as F,b as C,L as U,M as q,N as $,O as z,B as G,P as y,Q as H,R as Z,a as m,S as J,U as D,V as K,W as Q,X as V,i as P,k as W,Y as X,Z as j,_ as ee,$ as se,x as te,a0 as ae,a1 as re,a2 as ie,l as fe,a3 as ne,a4 as ce,a5 as de}from"./Dgkt2DZz.js";class ue{anchor;#s=new Map;#t=new Map;#e=new Map;#a=!0;constructor(e,a=!0){this.anchor=e,this.#a=a}#r=()=>{var e=I;if(this.#s.has(e)){var a=this.#s.get(e),r=this.#t.get(a);if(r)B(r);else{var i=this.#e.get(a);i&&(this.#t.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,n]of this.#s){if(this.#s.delete(s),s===e)break;const f=this.#e.get(n);f&&(g(f.effect),this.#e.delete(n))}for(const[s,n]of this.#t){if(s===a)continue;const f=()=>{if(Array.from(this.#s.values()).includes(s)){var u=document.createDocumentFragment();w(n,u),u.append(T()),this.#e.set(s,{effect:n,fragment:u})}else g(n);this.#t.delete(s)};this.#a||!r?N(n,f,!1):f()}}};#i=e=>{this.#s.delete(e);const a=Array.from(this.#s.values());for(const[r,i]of this.#e)a.includes(r)||(g(i.effect),this.#e.delete(r))};ensure(e,a){var r=I,i=x();if(a&&!this.#t.has(e)&&!this.#e.has(e))if(i){var s=document.createDocumentFragment(),n=T();s.append(n),this.#e.set(e,{effect:p(()=>a(n)),fragment:s})}else this.#t.set(e,p(()=>a(this.anchor)));if(this.#s.set(r,e),i){for(const[f,c]of this.#t)f===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[f,c]of this.#e)f===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(this.#r),r.ondiscard(this.#i)}else A&&(this.anchor=Y),this.#r()}}function le(t,e,a=!1){A&&C();var r=new ue(t),i=a?U:0;function s(n,f){if(A){const u=q(t)===$;if(n===u){var c=z();G(c),r.anchor=c,y(!1),r.ensure(n,f),y(!0);return}}r.ensure(n,f)}F(()=>{var n=!1;e((f,c=!0)=>{n=!0,s(c,f)}),n||s(!1,null)},i)}function O(t,e){return t===e||t?.[D]===e}function oe(t={},e,a,r){return H(()=>{var i,s;return Z(()=>{i=s,s=[],m(()=>{t!==a(...s)&&(e(t,...s),i&&O(a(...i),t)&&e(null,...i))})}),()=>{J(()=>{s&&O(a(...s),t)&&e(null,...s)})}}),t}let b=!1;function he(t){var e=b;try{return b=!1,[t(),b]}finally{b=e}}function ve(t,e,a,r){var i=!fe||(a&ne)!==0,s=(a&ie)!==0,n=(a&re)!==0,f=r,c=!0,u=()=>(c&&(c=!1,f=n?m(r):r),f),_;if(s){var k=D in t||de in t;_=K(t,e)?.set??(k&&e in t?d=>t[e]=d:void 0)}var l,E=!1;s?[l,E]=he(()=>t[e]):l=t[e],l===void 0&&r!==void 0&&(l=u(),_&&(i&&Q(),_(l)));var h;if(i?h=()=>{var d=t[e];return d===void 0?u():(c=!0,d)}:h=()=>{var d=t[e];return d!==void 0&&(f=void 0),d===void 0?f:d},i&&(a&V)===0)return h;if(_){var L=t.$$legacy;return(function(d,v){return arguments.length>0?((!i||!v||L||E)&&_(v?h():d),d):h()})}var S=!1,o=((a&ce)!==0?W:X)(()=>(S=!1,h()));s&&P(o);var M=te;return(function(d,v){if(arguments.length>0){const R=v?P(o):i&&s?j(d):d;return ee(o,R),S=!0,f!==void 0&&(f=R),d}return se&&S||(M.f&ae)!==0?o.v:P(o)})}export{ue as B,oe as b,le as i,ve as p};
